LOGIN
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"email":"new22_curl@gmail.com", "password": "curl"}' http://localhost:81/api/login

REGISTER
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"firstName":"222curl", "lastName":"222api", "email":"new22_curl@gmail.com", "password": "curl"}' http://localhost:81/api/register

PROBLEMPOST
<VALIID>:
curl -H "Content-Type: multipart/form-data" -F 'type=2' -F 'userId=2'  http://localhost:81/api/problempost

<EXAMPLE>
#curl -i -H "Authorization":"eyJhbGciOiJIUzI1NiIsImV4cCI6MTQyNjcwNTY4NiwiaWF0IjoxNDI2NzAyMDg2fQ.eyJpZCI6MTc3fQ.yBwLFez2RnxTojLniL8YLItWVvBb90HF_yfhcsyg3lY"     -F 'user_data={"user data": {"preferred_city":"Newyork","within_radious":"5"}};type=application/json'         http://localhost:81/api/problempost
#curl -H "Content-Type: multipart/form-data" -F 'user_data={"user data": {"preferred_city":"Newyork","within_radious":"5"}};type=application/json' http://localhost:81/api/problempost

<OK>
GET ALL PERMISSION DATA JSON
curl -H "Accept: application/json" -H "Content-type: application/json" -X GET http://localhst:81/api/get_all_permissions

<OK>
GET_RESORCE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X GET http://localhost:81/api/resources

<OK>
DELETE_RESORCE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X DELETE -d '{"resource_name":"CurlEdited"}' http://localhost:81/api/resources

<OK>
POST RESOURCE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"resource_name":"Test_Page"}' http://localhost:81/api/resources

GET PERMISSIONS
curl -H "Accept: application/json" -H "Content-type: application/json" -X GET http://localhost:81/api/permissions

ADD PERMISSIONS (and resource!)
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"resource_name":"Problem", "action":"DEL", "modifier":"Any"}' http://localhost:81/api/permissions;

EDIT RESOURCE_BY_ID:
curl -H "Accept: application/json" -H "Content-type: application/json" -X PUT -d '{"resource_name":"curl_edited", "resource_id" : 1}' http://localhost:81/api/resources

<OK>
EDIT RESOURCE_BY_VALUE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X PUT -d '{"old_resource_value":"Problem", "new_resource_value" : "CurlEdited"}' http://localhost:81/api/resources

<OK>
GET ROLE
 curl -H "Accept: application/json" -H "Content-type: application/json" -X GET http://localhost:81/api/roles

<OK>
ADD_ROLE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"role_name":"SuperAdmin"}' http://localhost:81/api/roles

<OK>
DELETE_ROLE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X DELETE -d '{"role_name":"Admin"}' http://localhost:81/api/roles


EDIT ROLE NAME BY ID:
curl -H "Accept: application/json" -H "Content-type: application/json" -X PUT -d '{"role_name":"User", "role_id":"2"}' http://ecomap.new/api/roles

<OK>
EDIT ROLE_BY_VALUE:
curl -H "Accept: application/json" -H "Content-type: application/json" -X PUT -d '{"old_role_value":"Admin", "new_role_value" : "CurlEdited"}' http://localhost:81/api/roles

<OK>
UPDATE PERMISSIONS
 curl -H "Accept application/json" -H "Content-type: application/json" -X PUT -d '{"resource_name":"Problem", "action" : "GET", "role_name": "Admin", "modifier":"Any"}' http://localhost:81/api/permissions

<OK>
NEW JOIN
select r.resource_name, p.action, p.modifier, role.name from permission as p left join resource as r on p.resource_id = r.id left join role on p.role_id = role.id;


<OLD>JOIN FOR ROLE_PERM
select * from role as r join role_permission as rp on r.id = rp.id join permission as p on rp.id = p.id;

<OLD>JOIN MAIN!!!
select r.name, p.action, p.modifier, res.resource_name from role as r join role_permission as rp on r.id = rp.id join permission as p on rp.id = p.id join resource as res on p.resourse_id = res.id;

ADD ROLE_PERMISSIONS_FOR_RESOURCE
curl -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{"resource_name":"Problem", "action":"DELETE", "modifier":"Any", "role_name":"Admin"}' http://localhost:81/api/role_permissions;



<OLD PARSE JSON>
def js_js(sql_list):
    dct = {}
    for (resource, method, perm, role) in sql_list:
        if resource not in dct:
            dct[resource] = {}
        if method not in dct[resource]:
            dct[resource][method] = {}
        # dct[resource][method] = {}
        if role not in dct[resource][method]:
            # dct[resource][method][perm] = {}
            dct[resource][method][role] = []
        if perm not in dct[resource][method][role]:
            dct[resource][method][role].append({perm:role})
            print [{k:v} for k,v in dct[resource][method].items()]

    return dct


    def js_js(sql_list):
    dct = {}
    for (resource, method, perm, role) in sql_list:
        if resource not in dct:
            dct[resource] = {}
        if method not in dct[resource]:
            dct[resource][method] = []
        # dct[resource][method] = {}
        # if role not in dct[resource][method]:
        #     # dct[resource][method][perm] = {}
        #     dct[resource][method][role] = []
        if role not in dct[resource][method]:
            dct[resource][method].append({role: perm})
            # print [{k:v} for k,v in dct[resource][method].items()]
    return dct

